<h1>Your Shopping Cart</h1>

<% if @cart.items.empty? %>
  <p>Your cart is empty.</p>
<% else %>
  <ul>
    <% @cart.items.each do |product_id, quantity| %>
      <li>
        <% product = Product.find(product_id) %>
        <%= product.product_name %> - <%= number_to_currency(product.price) %> (Quantity: <%= quantity %>)
        <%= form_with url: update_item_cart_path(product_id: product.id), method: :patch, local: true do %>
          <%= number_field_tag :quantity, quantity, min: 1, class: "border rounded p-1 w-12" %>
          <%= submit_tag 'Update', class: "bg-blue-500 text-white px-2 py-1 rounded" %>
        <% end %>
        <%= link_to 'Remove', remove_item_cart_path(product.id), method: :delete, class: "bg-red-500 text-white px-2 py-1 rounded ml-2" %>
      </li>
    <% end %>
  </ul>
  <%= link_to 'Clear Cart', clear_cart_path, method: :delete, class: "bg-red-500 text-white px-4 py-2 rounded" %>
<% end %>
